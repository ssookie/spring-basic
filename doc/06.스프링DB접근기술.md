# Chapter 06 "스프링 DB 접근 기술 - 스프링 데이터 엑세스"

## 1. H2 데이터베이스 설치

### 1.1. H2 DB 설치
* 개발이나 테스트 용도로 가볍고 편리한 DB, 웹 화면 제공
* https://www.h2database.com 에서 다운로드 및 설치
    * 권한 주기: chmod 755 h2.sh (윈도우 사용자는 x) 
    * 실행: ./h2.sh (윈도우 사용자는 h2.bat) 
    * 데이터베이스 파일 생성 방법
        * jdbc:h2:~/test (최초 한번)
        * ~/test.mv.db 파일 생성 확인
        * 이후부터는 jdbc:h2:tcp://localhost/~/test 이렇게 접속
        
### 1.2. [local에 h2 DB 설치하지 않고, dependency에 추가하여 사용하기](https://bgpark.tistory.com/78)
* In-memory 방식 지원 / Application 에 내장(Embeded) 되어 실행
* dependency - build.gradle
```
dependencies {
    ...
    runtimeOnly 'com.h2database:h2:1,4,197'  // h2 Database
}
```
* configuration - application.properties
```properties
spring.h2.console.enabled: true
```
* h2접속 - localhost:8080/h2-console
    * `Database "mem:testdb" not found, either pre-create it or allow remote database creation (not recommended in secure environments)`: 데이터베이스를 보안상의 이유로 생성을 못하게 h2 기본 설정 자체에서 막아놓음. <br>
    → 해결책 -  h2의 버전을 1.4.198보다 낮은 버전으로 설정

## 1.2. 테이블 생성하기

* 테이블 관리를 위해 `resources` 폴더에 schema.sql, data.sql 을 생성
 
## 2. 순수 Jdbc

### 2.1. 환경 설정
* build.gradle 파일에 jdbc, h2 데이터베이스 관련 라이브러리 추가
```
dependencies {  // 프로젝트 개발에 필요한 의존성 선언
    ...
    implementation 'org.springframework.boot:spring-boot-starter-jdbc'
    runtimeOnly 'com.h2database:h2:1.4.197'  // h2 Database
}
```

## 3. 스프링 통합 테스트 
## 4. 스프링 JdbcTemplate JPA
## 5. 스프링 데이터 JPA

